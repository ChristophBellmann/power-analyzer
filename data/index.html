<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Power‑Analaaaayzer</title>
  <style>
    :root{
      --bg-nav:#262626;
      --bg-page:#000;
      --bg-card:#d3d3d3;
      --fg-nav:#fff;
      --accent:#40c0d0;
      --grid:#0f0;
      --trace-v:#ffeb3b;
      --trace-i:#00bcd4;
    }
    *{box-sizing:border-box;margin:0;padding:0;font-family:system-ui,Segoe UI,Roboto,sans-serif;color:var(--fg-nav);}
    body{background:var(--bg-page);height:100vh;display:flex;flex-direction:column;overflow:hidden;}
    /* ───────────── NAVBAR ───────────── */
    nav{background:var(--bg-nav);display:flex;gap:1rem;padding:.4rem 1rem;user-select:none;}
    nav a{color:var(--fg-nav);text-decoration:none;font-size:1rem;padding:.3rem .6rem;border-radius:4px;cursor:pointer;transition:background .2s;}
    nav a:hover{background:#444;}
    nav a.active{background:var(--accent);color:#000;}
    /* ───────────── PAGES ───────────── */
    .page{flex:1;display:none;position:relative;}
    .page.active{display:flex;}
    /* ─── Scope Layout ─── */
    #scope{flex-direction:column;}
    #scope canvas{flex:1;width:100%;background:#000;display:block;}
    .card{position:absolute;top:1.2rem;left:1.2rem;width:280px;background:var(--bg-card);padding:1rem;border-radius:4px;color:#000;box-shadow:0 2px 6px rgba(0,0,0,.5);}
    .card label{display:block;font-size:.85rem;margin-top:.6rem;margin-bottom:.2rem;}
    .card input[type=range]{width:100%;accent-color:var(--accent);} 
    .card button{margin-top:1rem;padding:.3rem .7rem;border:none;background:var(--accent);color:#000;border-radius:4px;font-weight:600;cursor:pointer;}
    .card button:hover{filter:brightness(1.1);} 
    #statusBar{background:rgba(0,0,0,.7);padding:.4rem .6rem;font-size:.8rem;}
    /* Placeholder centers */
    .placeholder{margin:auto;text-align:center;width:100%;color:#888;font-size:1.1rem;}
  </style>
</head>
<body>
  <nav>
    <a data-target="scope" class="active">Scope</a>
    <a data-target="harmonics">Harmonics</a>
    <a data-target="ota">OTA</a>
    <a data-target="config">Config</a>
  </nav>
  <!-- ───────────────── Scope Page ───────────────── -->
  <section id="scope" class="page active">
    <canvas id="oscCanvas"></canvas>
    <div class="card" id="scopeControls">
      <label>Zeit‑Bereich (ms): <span id="timeVal">100</span></label>
      <input type="range" min="10" max="500" value="100" id="timeRange">
      <label>Vertikal-Res (V/div): <span id="vDivVal">1</span></label>
      <input type="range" min="0.1" max="10" step="0.1" value="1" id="vDivRange">
      <label>Trigger‑Level (ADC): <span id="trigVal">2048</span></label>
      <input type="range" min="0" max="4095" value="2048" id="trigRange">
      <button id="trigBtn">Trigger armieren</button>
    </div>
    <div id="statusBar">Abtastung: 100 ms / Frame</div>
  </section>
  <!-- ───────────────── Harmonics Page ───────────────── -->
  <section id="harmonics" class="page">
    <iframe src="/harmonics.html" class="placeholder" style="border:none;flex:1;"></iframe>
  </section>
  <!-- ───────────────── OTA Page ───────────────── -->
  <section id="ota" class="page">
    <div class="placeholder">OTA‑Update‑Seite (in Arbeit)</div>
  </section>
  <!-- ───────────────── Config Page ───────────────── -->
  <section id="config" class="page">
    <div class="placeholder">Konfigurations‑Seite (in Arbeit)</div>
  </section>
  <script>
    /* ---------- Navigation Handling ---------- */
    const navLinks = document.querySelectorAll('nav a');
    navLinks.forEach(link=>link.addEventListener('click',()=>{
      document.querySelector('nav a.active').classList.remove('active');
      link.classList.add('active');
      document.querySelector('.page.active').classList.remove('active');
      document.getElementById(link.dataset.target).classList.add('active');
    }));

    /* ---------- Control Panel Text‑Updates ---------- */
    const timeRange=document.getElementById('timeRange');
    const vDivRange=document.getElementById('vDivRange');
    const trigRange=document.getElementById('trigRange');
    const timeVal=document.getElementById('timeVal');
    const vDivVal=document.getElementById('vDivVal');
    const trigVal=document.getElementById('trigVal');
    [timeRange,vDivRange,trigRange].forEach(inp=>inp.addEventListener('input',()=>{
      timeVal.textContent=timeRange.value;
      vDivVal.textContent=vDivRange.value;
      trigVal.textContent=trigRange.value;
    }));
  </script>
</body>
</html>